Can you replace the previous code we added with this one instead? It should be more robust to dynamic changes in height:
 
<script>
(function () {
  const TYPE = "CONNEQT_IFRAME_HEIGHT";
 
  let rafId = null;
  function scheduleSend() {
    if (rafId) return;
    rafId = requestAnimationFrame(() => {
      rafId = null;
      sendHeight();
    });
  }
 
  function measureHeight() {
    // Works better across frameworks/layouts
    const body = document.body;
    const html = document.documentElement;
 
    // If your app uses a root container, include it too
    const appRoot =
      document.getElementById("root") ||
      document.getElementById("__next") ||
      document.querySelector("main") ||
      body;
 
    const rects = [body, html, appRoot].map(el => el.getBoundingClientRect().height);
    const scrolls = [body, html, appRoot].map(el => el.scrollHeight || 0);
    const offsets = [body, html, appRoot].map(el => el.offsetHeight || 0);
 
    return Math.ceil(Math.max(...rects, ...scrolls, ...offsets));
  }
 
  function sendHeight() {
    const height = measureHeight();
    parent.postMessage({ type: TYPE, height }, "*");
  }
 
  // Initial + common triggers
  window.addEventListener("load", scheduleSend);
  window.addEventListener("resize", scheduleSend);
 
  // SPA route changes sometimes won't trigger resize observers reliably
  ["pushState", "replaceState"].forEach(fn => {
    const orig = history[fn];
    history[fn] = function () {
      const ret = orig.apply(this, arguments);
      scheduleSend();
      return ret;
    };
  });
  window.addEventListener("popstate", scheduleSend);
 
  // Observe layout size changes
  const ro = new ResizeObserver(scheduleSend);
  ro.observe(document.documentElement);
  ro.observe(document.body);
  const root = document.getElementById("root") || document.getElementById("__next");
  if (root) ro.observe(root);
 
  // Catch DOM mutations that don't resize immediately (or that resize children only)
  const mo = new MutationObserver(scheduleSend);
  mo.observe(document.documentElement, { childList: true, subtree: true, attributes: true, characterData: true });
 
  // Images and fonts can change height after render
  window.addEventListener("load", () => {
    document.querySelectorAll("img").forEach(img => {
      if (!img.complete) img.addEventListener("load", scheduleSend, { once: true });
    });
  });
 
  if (document.fonts && document.fonts.ready) {
    document.fonts.ready.then(scheduleSend).catch(() => {});
  }
 
  // Send once immediately too
  scheduleSend();
})();
</script>